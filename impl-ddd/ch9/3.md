## 模型的模块命名约定

#### ▶[上一节](2.md)

模块名称的下一部分用于标识`Bounded Context`。将这一部分以`Bounded Context`的名称为基础来命名，是一种不错的选择。

---
| ||
|---|---|
|以下是 SaaSOvation 团队的模块命名示例：|<img src="../img/ovation.3.png" width="30%" />|

```java
    com.saasovation.identityaccess
    com.saasovation.collaboration
    com.saasovation.agilepm
```

他们曾考虑使用以下命名方式，但相较于之前的模块名称，这种方式即便能带来价值，也微乎其微。尽管这些名称准确地指明了上下文，但很可能会产生不必要的冗余信息。

```java
    com.saasovation.identityandaccess
    com.saasovation.agileprojectmanagement
```

值得一提的是，他们也没有在模块名称中使用商业产品名称（品牌名）。品牌名可能会发生变更，而且有时候产品名称与底层的`Bounded Context`几乎没有直接关联，甚至完全无关。通过名称标识上下文更为重要，因为这是团队日常讨论中所使用的内容。我们的目标是体现`Ubiquitous Language`。如果团队使用以下这些名称，将无法帮助他们实现这一目标：

```java
    com.saasovation.idovation
    com.saasovation.collabovation
    com.saasovation.projectovation
```

第一个模块名称 `com.saasovation.idovation` 与其`Bounded Context`几乎没有任何关联。第二个名称则相当贴近。第三个名称的缺陷几乎和第一个一样严重，只是稍好一些。至少它里面包含了 *project* 这个词。尽管如此，团队还是认为，这些名称无法让人凭直觉建立起与所代表的`Bounded Context`之间的清晰心智映射。更重要的是，如果市场营销部门决定更改任何产品名称（可能是出于商标侵权或文化适配性问题），这些模块名称就会完全过时。因此，团队决定沿用第一套命名方案。

接下来，他们添加了一个重要的限定词，用于标识该特定模块属于领域层：

```java
    com.saasovation.identityaccess.domain
    com.saasovation.collaboration.domain
    com.saasovation.agilepm.domain
```

---

这种命名约定与传统的 [Layers Architecture (4)](../ch4/0.md) 和 [Hexagonal Architecture (4)](../ch4/0.md) 均兼容。如今，采用分层架构的系统通常会以六边形、依赖注入的风格来管理各层。在六边形架构中，应用存在一个「内部」部分，其中就包含了领域层。这一点在其他架构风格中也大致类似。

domain 部分 (compartment) 可能不包含任何接口或类，仅作为底层模块的容器使用。以下是下一层级的命名：

```java
    com.saasovation.identityaccess.domain.model
    com.saasovation.collaboration.domain.model
    com.saasovation.agilepm.domain.model
```

这正是模型类开始被定义的地方。该包层级可以包含可复用的接口和抽象类。

---
SaaSOvation 团队倾向于在这个模块中放置通用接口（例如用于事件发布的接口），以及供`Entities`和`Value Objects`使用的抽象基类。

```java
    ConcurrencySafeEntity
    DomainEvent
    DomainEventPublisher
    DomainEventSubscriber
    DomainRegistry
    Entity
    IdentifiedDomainObject
    IdentifiedValueObject
```

---

如果你倾向于将`Domain Services`放置在 `domain.model` 模块之外，你可以创建一个与之同级的模块：

```java
    com.saasovation.identityaccess.domain.service
    com.saasovation.collaboration.domain.service
    com.saasovation.agilepm.domain.service
```

并非必须将`Domain Services`放置于此。如果你认为`Domain Services`是位于模型之上的中等粒度服务迷你层，或是环绕模型的一层结构 [[Evans, p. 108, “Granularity”](../bibli.md#evans)] ，那么可以采用这种方式。但需要注意，这种做法可能会迅速导致贫血领域模型 (Anemic Domain Model) 的问题，该问题在 [Services (7)](../ch7/0.md) 章节中已有讨论。

如果不将模型和服务划分为两个包，则可以省去 model 模块，直接将所有模型相关模块置于 domain 之下即可。

```java
    com.saasovation.identityaccess.domain.conceptname
```

这样做确实会去掉一层看似冗余的结构。然而，倘若你之后决定将部分`Domain Services`放入`domain.service`子模块中，届时你很可能会因当初没有创建`domain.model`子模块而感到懊恼。

但还有一个更为重要的命名考量因素需要牢记。要记住，我们并非在开发一个领域，[Domain (2)](../ch2/0.md) 是我们所服务业务的专业知识范畴。我们设计并实现的，是针对 *该领域的模型* 。因此，在为模型的最终模块命名时，`domain.model`的命名方式似乎最为恰当。当然，最终的选择权仍在你的团队手中。





#### ▶[下一节](4.md)
