## 以`Values`表达的标准类型

#### ▶[上一节](2.md)

在许多系统和应用中，都需要我所说的标准类型（Standard Types）。标准类型是一种描述性对象，用来表示事物的类型。系统中既有事物本身，可能是`Entity`，也可能是描述性的`Value`，也有用来区分它们的标准类型，以把它们和同类中的其他类型区分开。我不知道这个概念在行业里有没有标准名称，但我也听过有人把它叫作 *类型代码（type code）* 或 *查找表（lookup）* 。 *类型代码* 这个名字表达得并不清楚； *查找表* 又会让人疑惑：到底是在查找什么？我更喜欢标准类型这个名称，因为它更具描述性。为了让这个概念更清晰，我们来看几个用途。在某些情况下，它们会被建模为`Power Types`。

你的`Ubiquitous Language`定义了一个 PhoneNumber（`Value`），而每个电话号码还需要描述它的类型。“这个电话号码是家庭电话、移动电话、工作电话，还是其他类型？” 领域专家会这样问。那么，不同类型的电话号码应该被建模为一个类层次结构吗？如果为每种类型都创建一个单独的类，会让客户端在区分它们时变得更加困难。在这种情况下，你更可能希望使用一个标准类型（Standard Type）来描述电话的类型，例如 Home、Mobile、Work 或 Other。这些描述就代表了电话的标准类型。

正如我之前讨论的，在金融领域中，可能会有一个 Currency（`Value`）类型，用来约束 MonetaryValue 必须属于某个特定的世界货币。在这种情况下，标准类型（Standard Type）会为世界上的每种货币提供一个值，例如：AUD、CAD、CNY、EUR、GBP、JPY、USD 等等。在这里使用标准类型可以帮助你避免出现无效的货币类型。虽然仍然可能把错误的货币分配给 MonetaryValue，但至少不会出现不存在的货币。如果使用字符串属性，就可能把模型置于无效状态。例如，拼写错误的 “doolars” 就会引发一系列问题。

你可能正在制药领域工作，并为具有各种给药途径（administration routes）的药物进行建模。一种特定的药物（medication）是一个`Entity`，它具有很长的生命周期，其变化会随着时间被管理 —— 它会被概念化、研究、开发、测试、生产、改进，并最终停用。你可能会、也可能不会选择使用标准类型（Standard Types）来管理这些生命周期阶段。这些生命周期的转变完全可以在多个不同的`Bounded Contexts`中合理地进行管理。另一方面，每种药物针对患者的给药途径（directed patient administration route）可以通过标准类型描述来分类，例如：IV（静脉注射），Oral（口服）或 Topical（外用）

根据标准化程度的不同，这些类型可能只在应用程序内部维护，也可能被提升到企业共享数据库的重要级别，甚至可能通过国家或国际标准组织提供。标准化的程度有时会影响标准类型在模型内部的获取方式和使用方式。我们可能会把这些对象看作`Entities`，因为它们在自己专属的、原生的`Bounded Context`中拥有独立的生命周期。但无论这些标准类型是由何种标准组织创建和维护的，只要有可能，我们都应该在消费它们的上下文中将其视为`Values`。这样做是合理的，因为它们的作用是度量和描述事物的类型，而度量与描述最适合建模为`Values`。此外，例如 {IV} 这个实例与其他任何 {IV} 实例都是完全相同的。它们显然是可互换的，这也意味着它们可以被替换，并且可以使用`Value`相等性。因此，如果你在自己的`Bounded Context`中不需要维护这些描述性类型的变化连续性，就应该将它们建模为`Values`。




























#### ▶[下一节](4.md)
