## 附录：本书中模式的运用

#### ▶[上一节](conclusion/2.md)

我大学毕业不久收到的第一辆 “好车”，是一辆八年的标致。这辆被称为“法国奔驰”的车做工精良，驾驶体验极佳，且一直非常可靠。但到我拥有它时，它已步入故障频发、需要更多维护的年岁。

标致是一家历史悠久的企业，数十年来始终遵循着独特的进化路径。它拥有专属的机械术语体系，设计风格特立独行，甚至功能模块的划分方式也常有别于行业标准。这种特性造就了唯有标致专家才能维修的汽车，对于仅靠研究生收入维持生计的人而言，这无疑是个潜在难题。

有一次，我把车开到当地修理厂检查漏油问题。技师检查了底盘后告诉我：“机油是从车尾三分之二处的一个小盒子里漏出来的，这似乎和前后轮制动力分配有关。” 随后他拒绝修理，建议我前往五十英里外的经销商处。福特或本田这类车谁都能修，正因如此，尽管它们机械结构同样复杂，但拥有成本更低且更便捷。

我确实深爱那辆车，但再也不会买古怪的车了。直到某天，它被诊断出一个特别昂贵的故障，我对标致车彻底失望了。我把它捐给了当地接受汽车捐赠的慈善机构，然后花差不多等同于维修费的钱买了一辆破旧的本田思域。

<ins>领域开发缺乏标准的设计元素，因此每个领域模型及其对应的实现都显得古怪难懂。更糟的是，每个团队都不得不重复发明轮子（或是齿轮，或是雨刷）。在面向对象设计的世界里，万物皆可化作对象、引用或消息 —— 这固然是种有用的抽象。但这种抽象既未能有效约束领域设计的选项范围，也无法支撑对领域模型的经济性讨论。</ins>

若将 “万物皆为对象” 作为终点，就如同木匠或建筑师用 “万物皆为房间” 来概括房屋。会有个带高压插座和水槽的大房间，供你烹饪；会有个楼上的小房间，供你睡眠。描述普通房屋需要数页篇幅。建造或使用房屋的人们深知房间遵循特定模式，这些模式有专属名称，比如 “厨房”。这种语言使房屋设计讨论得以精简高效。

此外，并非所有功能组合都实用。为何不能将沐浴与睡眠合为一室？这岂不方便？但长久经验已凝结成习俗，我们坚持将 “卧室” 与 “浴室” 分开。毕竟，浴室设施的使用者通常比卧室更多，且需要最大程度的私密性，即使面对同住一室的家人亦是如此。浴室还需配备专业且昂贵的基础设施。浴缸和马桶通常共处一室，因为它们共享相同的基础设施（供水与排水系统），且使用时都要求私密性。

另一间对基础设施有特殊要求的房间，是用于准备餐食的空间，亦称 “厨房”。与浴室不同，厨房无需特殊隐私保护。由于造价高昂，即便在相对宽敞的住宅中通常也仅设一间。这种唯一性恰恰契合了我们共同烹饪与用餐的习俗。

当我说想要三卧两卫带开放式厨房的房子时，短短一句便浓缩了大量信息，同时避免了诸多荒谬错误，比如把马桶安在冰箱旁边。

在建筑、汽车、划艇或软件等所有设计领域，我们都在既往验证有效的模式基础上进行创作，在既定主题框架内进行即兴发挥。有时我们必须开创完全崭新的事物。但通过将标准元素建立在模式之上，我们避免将精力浪费在已有解决方案的问题上，从而能专注于特殊需求。此外，基于传统模式进行创作有助于避免设计过于特立独行而难以传达。

尽管软件领域的设计尚未如其他设计领域般成熟，且其多样性或许难以容纳汽车零件或房间设计那般具体的模式，但我们仍需超越 “万物皆对象” 的认知，至少达到区分螺栓与弹簧的认知层次。

<ins>20 世纪 70 年代，以 Christopher Alexander 为首的建筑师团队提出了一种分享与标准化设计洞见的体系（ [Alexander et al. 1977](references.md#alexander-1977) ）。他们的 “模式语言 (pattern language)” 将经实践验证的通用设计解决方案有机整合（其精妙程度远超我 “厨房” 的例子，该例或许令部分亚历山大的读者感到不适）。其初衷在于让建造者与使用者通过这种语言进行沟通，并遵循这些模式创造出既实用又美观的建筑，让使用者获得愉悦体验。</ins>

无论建筑师对此理念作何评价，这种模式语言对软件设计产生了深远影响。20 世纪 90 年代，软件模式被广泛应用并取得显著成效，尤其在详细设计（ [Gamma 等人，1995](references.md#gamma-1995) ）和技术架构（ [Buschmann 等人，1996](references.md#buschmann-1996) ）领域。近年来，模式被用于记录基础面向对象设计技术（ [Larman 1998](references.md#larman-1998) ）及企业架构（ [Fowler 2003](references.md#fowler-2003), [Alur et al. 2001](references.md#alur-2001)）。模式语言现已成为组织软件设计思想的主流技术。

模式名称旨在成为团队语言中的术语，本书中我便以此方式使用它们。当模式名称出现在讨论中时，会采用小写格式加以突出显示。

本书中模式的格式规范如下。虽然存在一些变体，但基本遵循此原则，我更注重个案的清晰度与可读性，而非僵化的结构规范。

### 模式名称
\[概念示意图。有时采用视觉隐喻或富有感染力的文字。\]

\[背景说明。简要阐述该概念与其他模式的关联性。某些情况下，提供模式概述。

然而，本书中大部分背景讨论集中在章节导言及其他叙述性段落中，而非模式条目内部。

🌼🌼🌼\]

- \[问题讨论\]

  **问题概述 (Problem summary)**

  关于将问题要素转化为解决方案的探讨。

  因此：

  **解决方案概述 (Solution summary)**

  影响。实施考量。示例。

🌼🌼🌼

上下文说明：简要阐述该模式如何衍生出后续模式。

\[关于实施挑战的讨论。在 Alexander 的原始格式中，此类讨论本应纳入问题解决方案的章节，而我在本书中也常遵循 Alexander 的组织结构。但某些模式需要更详尽的实施讨论。为保持核心模式讨论的精炼性，我将此类冗长的实施讨论移至模式之后。

此外，冗长的示例，尤其是融合多种模式的案例，通常不属于模式范畴。\]

#### ▶[下一节](glossary.md)
