## 系统隐喻：`SYSTEM METAPHOR`

#### ▶[上一节](1.md)

隐喻思维在软件开发中无处不在，尤其体现在模型设计中。但极限编程实践中的 “隐喻 (metaphor)” 一词，如今特指一种运用隐喻来为整个系统开发过程建立秩序的特定方法。

🌼🌼🌼

正如防火墙能保护建筑免受邻近建筑的火势蔓延，软件 “防火墙” 也能保护本地网络免受外部大型网络的威胁。这个比喻影响了网络架构，并催生了整个产品类别。市场上有多款竞争性的防火墙产品 ——它们独立开发，且被认为具有一定互换性—— 可供消费者选择。网络新手也能轻松理解这个概念。这种在整个行业和客户群体中形成的共识，很大程度上要归功于这个比喻。

然而这种类比并不精确，其效力具有双重性。防火墙的隐喻导致了软件屏障的开发，这些屏障有时缺乏足够的选择性，阻碍了有益的交流，却无法抵御来自内部的威胁。例如，无线局域网就存在安全隐患。防火墙概念的清晰性固然有益，但所有隐喻都带有局限性。<sup>[1](#1)</sup>

<ins>**软件设计往往高度抽象且难以理解。开发者和用户都需要切实可行的方法来理解系统，并共享对系统整体的认知。**</ins>

从某种层面而言，隐喻在我们的思维中根深蒂固，渗透于每个设计之中。系统拥有层层叠加的 “层级”，在 "核心" 处设有 “内核”。但有时会出现某种隐喻，它能传达整个设计的中心主题，并在所有团队成员间建立共同认知。

当这种情况发生时，系统实际上是由隐喻塑造的。开发者会做出与系统隐喻相一致的设计决策。这种一致性将使其他开发者能够通过相同的隐喻来理解复杂系统的各个部分。在讨论中，开发者和专家拥有一个可能比模型本身更具体的参照点。

`SYSTEM METAPHOR`是一种宽松、易于理解的大规模结构，与对象范式相协调。因为`SYSTEM METAPHOR`本质上只是对领域的一种类比，不同的模型可以以近似的方式映射到它上面，这使得它可以应用于多个 [BOUNDED CONTEXT](../ch14/1.md) ，从而有助于协调它们之间的工作。

`SYSTEM METAPHOR`已成为一种流行的方法，因为它是极限编程（Beck 2000）的核心实践之一。不幸的是，很少有项目找到了真正有用的`METAPHORS`，而人们也尝试将这一理念应用到一些适得其反的领域。一个有说服力的隐喻可能会引入这样的风险：设计可能会呈现出类比中不适合当前问题的特征，或者虽然类比具有吸引力，但可能并不贴切。

话虽如此，`SYSTEM METAPHOR`是一种知名的大规模结构形式，在某些项目中非常有用，并且很好地展示了结构的一般概念。

因此：

<ins>**当出现一个能够具体类比系统、激发团队成员想象力并似乎能引导思维朝着有用方向发展的比喻时，就将其作为大型结构采纳。围绕这个比喻来组织设计，并将其融入到 [UBIQUITOUS LANGUAGE](../ch2/1.md) 中。`SYSTEM METAPHOR`既应促进关于系统的交流，也应指导系统的开发。这可以增加系统不同部分的连续性，甚至可能跨不同的 [BOUNDED CONTEXTS](../ch14/1.md) 。但由于所有比喻都不是完全准确的，需要不断重新审视比喻是否被过度使用或不合适，并在其妨碍工作时准备放弃它。**</ins>

🌼🌼🌼

### “天真隐喻” 及其不必要性

由于在大多数项目中很少会出现一个有用的隐喻，XP 社区中的一些人开始谈论天真的隐喻，他们所指的是领域模型本身。

这个术语的一个问题在于，成熟的领域模型绝非天真。事实上，“工资处理就像流水线”这种说法很可能比经过多次与领域专家的知识整合、并通过在实际应用实现中紧密验证的模型要天真得多。

术语 “天真隐喻” 应该被弃用。

`SYSTEM METAPHORS`并非在所有项目中都有用。大规模结构通常也不是必需的。在极限编程的 12 项实践中，`SYSTEM METAPHOR`的角色可以由 [UBIQUITOUS LANGUAGE ](../ch2/1.md) 来承担。当项目找到合适的`SYSTEM METAPHORS`或其他大规模结构时，应将其作为对该`LANGUAGE`的补充。

#### ▶[下一节](3.md)

---
#### 1
当我在研讨会讲座中听到 Ward Cunningham 用这个防火墙例子时，`SYSTEM METAPHOR`的概念终于豁然开朗。
