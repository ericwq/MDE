## 标记核心：`HIGHLIGHTED CORE`

#### ▶[上一节](4.md)

[DOMAIN VISION STATEMENT](4.md) 以广泛的方式确定 [CORE DOMAIN](1.md) ，但具体的`CORE`模型元素的识别则取决于个人的理解差异。除非团队内部有非常高水平的沟通，否则单凭`VISION STATEMENT`几乎不会产生影响。

🌼🌼🌼

<ins>**尽管团队成员可能大致了解构成 [CORE DOMAIN](1.md) 的要素，但不同人选出的要素并不完全相同，即便是同一个人，其选择也可能因日而异。持续筛选模型以识别关键部分的思维劳动，会消耗本应用于设计思维的专注力，且需要对模型有全面的认知。必须让 [CORE DOMAIN](1.md) 更易于识别。**</ins>

<ins>**对代码进行重大结构性改动是识别 [CORE DOMAIN](1.md) 的理想方式，但短期内未必切实可行。事实上，若缺乏团队所欠缺的视角，此类重大代码变更往往难以实施。**</ins>

模型组织结构的调整，例如将[GENERIC SUBDOMAINS](3.md) 进行划分以及本章后续将涉及的其他调整，能够让`MODULES`更清晰地阐述核心逻辑。但若将其作为传达 [CORE DOMAIN](1.md) 的唯一途径，则过于雄心勃勃，不宜立即实施。

你可能需要更轻量级的方案来补充这些激进的技术手段。你可能面临物理隔离`CORE`的限制条件，或者初始代码未能清晰区分`CORE`，但你确实需要看清`CORE`并共享这种视角，才能有效重构以实现更优的提炼。即便在高级阶段，精心挑选的几张图或文档也能为团队提供思维锚点和切入点。

这些问题同样存在于采用复杂 UML 模型的项目，以及那些（如极限编程项目）仅保留少量外部文档、将代码作为模型主要存储库的项目中。极限编程团队可能更倾向极简主义，使这些补充材料更随意且更具临时性（例如在墙上绘制手绘图供所有人查看），但这些技术仍能完美融入开发流程。

标记模型中特权部分及其对应的实现，是对模型的反思，而非模型本身的一部分。任何能让所有人轻松识别 [CORE DOMAIN](1.md) 的技术都适用。以下两种具体技术可代表此类解决方案。

### 提炼文档

我常单独创建文档来描述和阐释 [CORE DOMAIN](1.md) 。它可以是列举最关键概念对象的简明清单，也可以是聚焦这些对象的图集，展示其最核心的关系。它能以抽象层面的阐述或具体示例的方式，梳理基础交互逻辑。它可以采用 UML 类图或序列图、特定领域的非标准图表、措辞严谨的文字说明，或这些形式的组合。 *提炼文档并非完整的设计文档。* 而是一个极简的切入点。它界定并阐释`CORE`，同时指出需要深入审视特定组件的理由。读者由此获得整体架构的宏观视角，并被引导至代码的相应部分获取更多细节。

因此（作为`HIGHLIGHTED CORE`的一种形式）：

<ins>**编写一份非常简短的文档（三至七页，内容简略），描述 [CORE DOMAIN](1.md) 以及`CORE`元素之间的主要交互关系。**</ins>

所有独立文件的常规风险均适用。

1. 文件可能无法得到维护。
2. 文件可能无法被阅读。
3. 通过增加信息来源，文件可能背离其简化复杂性的初衷。

限制这些风险的最佳方式是坚持极简主义。远离琐碎细节，聚焦核心抽象及其交互关系，能使文档更持久地保持有效，因为该层级的模型通常更为稳定。

撰写文档时应确保团队中非技术成员也能理解。将其作为共享视图，明确界定每位成员必须掌握的内容，同时作为指引，让所有团队成员都能以此为起点探索模型与代码。

### 标记为`CORE`的核心模块

在某大型保险公司项目的第一天，我收到了一份名为 “领域模型” 的文档，这份耗费巨资从行业联盟购得的文件足有两百页之厚。我花了几天时间翻阅杂乱的类图，内容涵盖从保险单的详细构成到人际关系的高度抽象模型。这些模型的分解质量参差不齐，从高中生作业水平到相当不错（其中少数甚至在附带文本中描述了业务规则）。但该从何处着手？整整两百页。

该项目文化极度推崇抽象框架构建，我的前任们专注于构建一种高度抽象的模型，用于描述人与人之间、人与事物之间、以及人与活动或协议之间的关系。这种关系分析本身相当精妙，他们对该模型的实验也具备学术研究项目的特质。但这些努力离保险应用程序的实际开发还差得远。

我的第一反应是开始大刀阔斧地删减，先找一个小型的 [CORE DOMAIN](1.md) 作为退路，再逐步重构并逐步引入其他复杂性。但管理层对这种态度感到不安。这份文档被赋予了极高的权威性，其制定过程汇聚了全行业的专家，况且他们支付给联盟的费用远高于我的薪酬，因此不太可能过分重视我提出的激进变革建议。但我深知，我们必须建立对 [CORE DOMAIN](1.md) 的共识，让所有人的努力都聚焦于此。

我没有进行重构，而是仔细研读了文档。在一位业务分析师的协助下，他不仅精通保险行业整体情况，更熟悉我们即将开发的应用程序的具体需求，我锁定了其中几个关键章节，这些章节阐述了我们需要重点处理的核心差异化概念。我构建了模型导航结构，清晰呈现了`CORE`及其与辅助功能的关联关系。

基于这一思路，一项新的原型设计工作启动，并迅速产出一个简化应用程序，成功演示了部分必要功能。

两磅可回收纸张，仅凭几页标签和黄色荧光笔，便转化为一项商业资产。

该技术并非仅适用于纸质对象图。广泛使用UML图的团队可采用“刻板印象”来标识核心元素；而将代码作为模型唯一存储库的团队，则可使用注释（例如JavaDoc结构化注释），或借助开发环境中的特定工具。具体技术手段并不重要，关键在于开发人员能轻松辨别哪些内容属于 [CORE DOMAIN](1.md) ，哪些不属于。

因此（作为另一种形式的`HIGHLIGHTED CORE`）：

<ins>**在模型的主存储库中标记于 [CORE DOMAIN](1.md) 的元素，无需刻意阐明其作用。让开发者能够轻松辨别哪些属于`CORE`范畴，哪些不属于。**</ins>

[CORE DOMAIN](1.md) 对于使用该模型的人来说现在显而易见，只需相当少的努力和低维护成本，至少在模型足够细分以区分各部分贡献的程度上是如此。

### 蒸馏文档作为流程工具

理论上，在 XP 项目中，任何两人组合（即两名共同协作的程序员）均可修改系统中的任意代码。但实践中，某些变更会产生重大影响，需要更多协商与协调。在基础设施层进行修改时，变更的影响可能显而易见；但在通常组织架构下的领域层，这种影响则未必如此清晰。

通过 [CORE DOMAIN](1.md) 的概念，这种影响得以清晰呈现。对 [CORE DOMAIN](1.md) 模型的变更应产生重大影响。广泛使用的通用元素变更可能需要大量代码更新，但它们仍不应引发如`CORE`变更那样的概念性转变。

请以提炼文档为指导。当开发人员意识到提炼文档本身需要变更以保持与代码或模型变更同步时，则需进行协商。这意味着他们要么在根本性地改变 [CORE DOMAIN](1.md) 的元素或关系，要么在调整`CORE`的边界——包括新增或排除某些内容。必须通过团队惯用的沟通渠道向全体成员传达模型变更信息，包括分发新版提炼文档。

<ins>**如果蒸馏文档概述了 [CORE DOMAIN](1.md) 的要点，那么它就成为衡量模型变更重要性的实用指标。当模型或代码变更影响到提炼文档时，需征询其他团队成员意见。变更实施后须立即通知全体成员，并发布文档新版本。对于`CORE`范围之外的变更，或未包含在提炼文档中的细节调整，可无需协商或通知直接整合，其他成员将在工作中自然接手。此时开发者便拥有XP倡导的完全自主权。**</ins>

🌼🌼🌼

尽管 [DOMAIN VISION STATEMENT](4.md) 和`HIGHLIGHTED CORE`提供信息并指引方向，但它们并不会实际修改模型或代码本身。划分 [GENERIC SUBDOMAINS](3.md) 可物理性地移除某些干扰元素。后续模式将探讨如何通过结构性改变模型与设计本身，使 [CORE DOMAIN](1.md) 更清晰可见且易于管理。……

#### ▶[下一节](6.md)

