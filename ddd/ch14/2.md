## 持续集成：`CONTINUOUS INTEGRATION`

#### ▶[上一节](1.md)

<img src="../img/part4.2.png" width="80%" />

*在定义了 [BOUNDED CONTEXT](1.md) 之后，我们必须确保其有效性。*</br>

🌼🌼🌼

<ins>**当多人共同工作于同一 [BOUNDED CONTEXT](1.md) 时，模型碎片化的倾向会显著增强。团队规模越大，问题越突出，但即便仅有三四人协作也可能遭遇严重困境。然而将系统不断拆解为更细小的 [CONTEXTS](1.md) ，终将导致宝贵的集成度与一致性层级丧失。**</ins>

有时开发者未能完全理解他人设计的对象或交互意图，其修改反而使之丧失了原始功能。有时他们未意识到正在处理的概念已在模型其他部分实现，却仍重复（且不精确地）复制这些概念与行为。有时他们虽知晓其他实现方式，却因担心破坏现有功能而不敢触碰，最终仍选择重复概念与功能。

要维持开发任何规模统一系统所需的沟通水平非常困难。我们需要增强沟通、降低复杂性的方法，同时需要安全网来防止过度谨慎的行为，例如开发者因害怕破坏现有代码而重复实现功能。

正是在这样的环境中，极限编程（XP）才真正展现出其价值。许多 XP 实践都致力于解决这个特定问题：在多人持续变更的情况下保持设计的一致性。最纯粹的 XP 模式非常适合在单个 [BOUNDED CONTEXT](1.md) 内维护模型完整性。然而，无论是否采用 XP，建立某种`CONTINUOUS INTEGRATION`流程都至关重要。

`CONTINUOUS INTEGRATION`意味着上下文内所有工作都以足够高的频率进行合并并保持一致，从而能在出现分歧时迅速发现并修正。如同领域驱动设计中的其他要素，`CONTINUOUS INTEGRATION`同样在两个层面运作：(1) 模型概念的整合，以及 (2) 实现层面的集成。

概念通过团队成员间的持续沟通得以整合。团队必须培养对不断变化的模型形成共同理解。诸多实践方法皆可助力，但最根本的是不断锤炼 [UBIQUITOUS LANGUAGE](../ch2/1.md) 。与此同时，通过系统化的合并/构建/测试流程整合实现成果，该流程能及早暴露模型碎片。虽采用多种集成流程，但多数有效流程都具备以下特征：

- <ins>一套可重复的、分步式合并/构建技术；</ins>
- <ins>自动化测试套件；以及</ins>
- <ins>针对未集成变更设置合理小幅上限的规则。</ins>

有效流程的另一面，尽管很少被正式纳入，是概念整合。

- <ins>在模型与应用的讨论中持续运用 [UBIQUITOUS LANGUAGE](../ch2/1.md)</ins>

大多数敏捷项目至少每天合并一次每位开发者的代码变更。合并频率可根据变更速度调整，但需确保任何未集成变更都能在其他团队成员完成大量不兼容工作之前完成合并。

在 [MODEL-DRIVEN DESIGN](../ch3/1.md) 中，概念的整合为实现的整合铺平道路，而实现的整合则验证了模型的有效性和一致性，并暴露了潜在分歧。

因此：

<ins>**建立一个频繁合并所有代码及其他实现成果的流程，配合自动化测试快速标记碎片化问题。持续运用 [UBIQUITOUS LANGUAGE](../ch2/1.md) 随着不同人脑海中概念的演进，不断锤炼出对模型的共同认知。**</ins>

最后，不要让工作量超出必要范围。`CONTINUOUS INTEGRATION`仅在 [BOUNDED CONTEXT](1.md) 内至关重要。涉及相邻`CONTEXTS`的设计问题（包括翻译）无需同步处理。

🌼🌼🌼

`CONTINUOUS INTEGRATION`将在任何大于两人任务的独立 [BOUNDED CONTEXT](1.md) 内实施，以维护该单一模型的完整性。当多个 [BOUNDED CONTEXTS](1.md) 并存时，需明确它们之间的关系并设计必要的接口......

#### ▶[下一节](3.md)
