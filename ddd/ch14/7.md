## 顺从者：`CONFORMIST`

#### ▶[上一节](6.md)

<img src="../img/part4.7.png" width="30%">

当两个存在上下游关系的团队未能从同一来源获得有效指导时，诸如`CUSTOMER/SUPPLIER TEAMS`这类协作模式便难以奏效。若盲目套用该模式，下游团队将陷入困境。这种情况常见于大型企业：两个团队在管理层级中相距甚远，或共同主管对两者关系漠不关心。当客户业务对供应商而言缺乏个体价值时，跨公司团队间也会出现此类困境。或许供应商拥有众多小客户，或许其正调整市场方向而不再重视老客户，也可能单纯因管理不善甚至破产倒闭。无论缘由如何，现实是下游团队只能孤军奋战。

<ins>**当两个开发团队存在上游/下游关系时，若上游团队缺乏满足下游需求的动力，下游团队便束手无策。利他主义或许能促使上游开发者做出承诺，但这些承诺往往难以兑现。对这些善意的信任，导致下游团队基于永远无法实现的功能制定计划。下游项目将不断延期，直至团队最终学会接受现有资源。量身定制的接口根本无从谈起。**</ins>

在此情境下，存在三条可行路径。其一是彻底放弃使用上游资源。该选项需基于现实评估，切勿预设上游会满足下游需求。我们常会高估此类依赖的价值或低估其成本。若下游团队决定斩断联系，则意味着双方将走向`SEPARATE WAYS`（详见本章后文的模式描述）。

有时使用上游软件的价值如此之大，以至于必须维持这种依赖关系（或团队已做出无法改变的政治决策）。这种情况下仍有两条路径可选，具体取决于上游设计的质量与风格。若设计存在严重缺陷，例如缺乏封装性、抽象层级混乱，或采用团队无法适用的建模范式，下游团队仍需构建自有模型。他们必须全权负责构建可能极为复杂的转换层（详见本章后文`ANTICORRUPTION LAYER`）。

---
**跟随并不总是坏事**

在使用具有大型接口的现成组件时，通常应当`CONFORM`该组件隐含的模型。因为组件和应用程序显然属于不同的`BOUNDED CONTEXTS`，根据团队的组织和控制，可能需要通过适配器进行一些小的格式调整，但模型本身应该是等效的。否则，你应该质疑使用该组件的价值。如果它足够好能够提供价值，它的设计中可能凝聚了某些知识。在它的狭义范围内，它可能远比你自己的理解更为先进。你的模型大概扩展到了该组件范围之外的部分，你自己的概念将会在这些其他部分中不断演进。但在它们连接的地方，你的模型是一个`CONFORMIST`，跟随组件模型的引导。实际上，你可能会被带入一个更好的设计中。

当你与组件的接口较小，共享统一模型的重要性降低，转换成为可行方案。但当接口庞大且集成意义重大时，通常遵循领导者才是明智之举。

---

另一方面，如果质量尚可，风格也基本契合，那么或许最好彻底放弃独立模型的想法。这种情况下，顺从者才是最佳选择。

因此：

<ins>**通过严格遵循上游团队的模型，消除`BOUNDED CONTEXTS`之间转换的复杂性。尽管这会束缚下游设计者的创作自由，且可能无法为应用程序生成理想模型，但选择`CONFORMITY`能极大简化集成过程。此外，您将与供应商团队共享 [UBIQUITOUS LANGUAGE](../glossary.md#ubiquitous-language) 。供应商处于主导地位，因此为其提供便捷的沟通渠道至关重要。仅凭利他主义或许就足以促使他们与你共享信息。**</ins>

此决策将加深您对上游的依赖，并使您的应用程序受限于上游模型的能力 —— 仅能进行纯粹的增量增强。这种选择在情感上极不讨喜，因此我们采用它的频率远低于实际应有的水平。

若这些权衡不可接受，但上游依赖又不可或缺，则仍可选择第二种方案：通过创建`ANTICORRUPTION LAYER`尽可能实现自我隔离 —— 这是一种激进的翻译映射 (translation map) 实现方法，将在后续章节中详细讨论。

🌼🌼🌼

`CONFORMIST`与`SHARED KERNEL`相似之处在于：两者均存在重叠区域（模型相同）、扩展区域（您的模型通过添加功能得到扩展）以及互不影响区域（另一模型对您无影响）。这两种模式的差异在于决策与开发流程：`SHARED KERNEL`模式是两个团队紧密协作的结果，而`CONFORMIST`模式则需应对与缺乏协作意愿的团队进行集成。

在`BOUNDED CONTEXTS`的集成过程中，我们沿着合作程度的谱系不断推进，从高度协作的`SHARED KERNELS`或`CUSTOMER/SUPPLIER DEVELOPER TEAMS`，到单方面的`CONFORMIST`模式。现在我们将迈出最后一步，转向对这种关系更为悲观的视角——假设对方既不愿合作，也无法提供可用的设计......

#### ▶[下一节](8.md)
