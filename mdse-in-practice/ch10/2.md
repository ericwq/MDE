## 10.2 模型持久化

#### ▶[上一节](1.md)

简单文件是最常见的模型存储格式。通常工具采用基于 XML 的序列化格式（如前述 XMI 模式或专有格式）存储全部模型信息。例如 Eclipse 中基于 EMF 的工具默认即采用此方式。每个模型保存于独立文件中，但允许存在对外部文件的交叉引用。

该方案适用于多数项目，但在处理超大规模模型（数百万实例模型）时，如模型驱动逆向工程场景中生成的模型时，会面临可扩展性问题。对于超大规模模型，加载完整模型至内存可能不可行，需采用懒加载等随机访问策略。本文重点介绍一些可解决此问题的工具。

- **CDO** ：连接数据对象（Connected Data Objects, CDO）模型存储库 (Model Repository) <sup>[5](0.md#5)</sup> 正是为此目标而创建。CDO 是一个运行时持久化框架，专为大型对象图 (large object graphs) 的可扩展 (scalable) 查询和事务支持进行优化。作为后端，CDO 支持多种策略（对象数据库、NoSQL 数据库和关系型数据库），但主要侧重于后者。对于关系型数据库，CDO 依靠 Teneo <sup>[6](0.md#6)</sup>，一款面向 EMF 的模型-关系映射与运行时数据库持久化解决方案，亦可作为独立工具使用。
- **NeoEMF** ：面向大型模型持久化与查询的 NoSQL 多后端框架。该框架认识到不存在完美的模型存储后端，因此支持为特定需求添加自定义后端。默认包含基于图的后端（兼容 Blueprints 数据库，特别是 Neo4J <sup>[7](0.md#7)</sup> ）和 MapDB 后端。其他 NoSQL 原型工具包括 Morsa <sup>[8](0.md#8)</sup> 和 MongoEMF <sup>[9](0.md#9)</sup> ，均采用 MongoDB 作为后端。
- **EMF Fragments** ：EMF Fragments <sup>[10](0.md#10)</sup> 区别于前两种方案，其核心策略是聚焦于模型块 (model chunks)（片段）的持久化而非单个对象。每个块映射到一个 URI，可存储于包括键值存储 (key-value approaches) 在内的多种分布式数据存储中。
- **IncQuery** ：一款高性能图搜索工具。IncQuery <sup>[11](0.md#11)</sup> 摒弃存储层面的关注，转而聚焦查询层面，为加载模型提供增量搜索能力。其运行时性能通过基于 Rete 算法的增量图模式匹配技术实现。

如第 [10.8](8.md) 节后续所述，将云端作为大型模型的存储基础设施，亦是应对可扩展性问题的未来可行方案。


#### ▶[下一节](3.md)
