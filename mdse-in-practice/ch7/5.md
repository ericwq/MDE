## 7.5 真实世界案例：IFML

#### ▶[上一节](4.md)

为更深入理解在实际场景中定义建模语言的意义，超越此前讨论的简单示例，本文将呈现一个真实世界的建模语言定义案例。具体而言，我们将探讨交互流程建模语言（Interaction Flow Modeling Language, IFML），该语言于 2014 年被对象管理组织（OMG）采纳为标准。

IFML 支持应用程序前端的规范，且独立于其实现的技术细节。因此相较于此前介绍的 sWML，它可视为更丰富的（超集）建模语言。相较于 sWML，IFML 适用于任何类型的软件前端建模，涵盖：(i) 视图的组合，以构成界面的可视化单元为基础；(ii) 视图的内容，即向用户展示的信息； (iii) 用户界面支持的命令与交互事件；(iv) 动作，即由事件触发的业务逻辑；(v) 参数绑定，定义用户界面元素间传递的数据项。

### 7.5.1 要求
定义一种旨在广泛应用和普及的语言时，需满足四大核心要求：
- **基于标准建模框架** 定义语言；
- 在 **满足领域** 需求的同时，兼顾普及所需的 **易用性与简洁性** 来定义语言特性；
- 具备 **与其他建模视角集成** 的能力，通常通过允许引用其他语言定义的建模元素或整个图；
- 通过合理且有限的扩展点实现 **语言可扩展性** ，以满足特定领域或企业需求，而不扭曲语言本质；
- 支持建模元素 **复用** ，从而最大限度减少模型冗余。

### 7.5.2 在 IFML 中满足要求

上述要求已在 IFML 语言定义中通过以下方式实现：

- **标准化** ：IFML 定义基于 OMG 标准，即 OMG 模型驱动架构（Model Driven Architecture, MDA）框架。具体而言，该规范包含五大核心技术成果 (artifacts)。*IFML 元模型* 及其描述规定了 IFML 构造的结构与基本语义。*IFML UML profile* 定义了基于 UML 的语法以表达 IFML 模型，IFML UML profile 是基于 UML 组件（含基础组件与封装组件）、类及其他 UML 核心概念的运用。*IFML visual syntax* 则提供了模型的具体可视化呈现。*IFML serialization* 提供标准模型交换格式以确保工具互操作性。所有部件 (parts) 均遵循 OMG 标准制定：元模型通过 MOF 元建模语言定义（同时提供等效的 Ecore 定义）；UML 配置文件 (profile) 依据 UML 2.4 配置规则 (profiling rules) 定义；可视化语法则通过图定义（Diagram Definition, DD）与图交换（Diagram Interchange, DI）标准实现。模型序列化与交换格式基于 XMI。
- **简洁性** ：IFML 采用可视化建模语言表达用户交互建模需求，该语言经多年实践验证（其变体已广泛应用），并继承了 WebML [14](../bibliography.md#14) 等 “祖先” 语言的优势。这使我们得以精简语言结构，剔除冗余复杂性。IFML 的设计尽可能遵循以下 “黄金法则”：简洁性 —— 即用最少图示类型和概念表达关键界面与交互设计决策；模型推导性 —— 当现有模型部件可推导出新内容时，建模层面的推导规则可应用默认建模模式与细节，避免建模者重复指定冗余信息。主要简化因素之一在于 IFML 的可视化语法基于单一 (unique) 图示类型提供具体化表达。这种设计将用户界面的所有方面整合（为单一表示形式），而其他方法，如 MobML [26](../bibliography.md#26) 或 UML（参见 UML 配置文件 WAE [18](../bibliography.md#18)</sup> ）则需结合类图、状态机图、序列图、活动图、复合结构图及自定义图才能描述用户界面。这种单图表示法的简化使 IFML 成为一种易于学习、使用便捷且工具供应商易于实现的建模语言。
- **集成** ：有时语言设计中最艰难的选择往往在于取舍。这种决策通常基于两种动机：(i) 某些方面与语言使用无关，故不应纳入考虑；(ii) 某些方面并非语言的核心贡献，即使与语言关注领域相关，也应交由专注于这些方面的其他现有语言处理。在后一种情况下，最好的选择是在语言中直接覆盖核心方面，再连接（如通过引用）其他语言处理剩余问题。例如，IFML 刻意忽略呈现方面 —— 因呈现与抽象相悖（图形设计中每个像素都至关重要），且没有为这方面专门对接任何建模语言。另一方面，它将某些虽与用户界面相关却不属于其组成部分的方面，委托给外部模型处理，例如：数据持久化、控件同步以及业务逻辑定义。
- 可扩展性：IFML 基于一套精炼的核心概念抓住 (capture) 交互本质：界面（容器）、刺激（事件）、内容（组件与数据绑定）、动态（流程与动作）。这些概念的设计初衷就是为适应技术与设备演进而扩展。因此 IFML 内置标准机制，允许将新概念定义为核心语言概念的特殊化形式。例如，设计师可针对特定领域或设备，研究新型组件类型（代表特定控件）或新型事件类型。
- 可复用性：IFML 通过定义专门的模型元素 *Modules* ，帮助语言使用者定义可复用且模块化的模型。这些模块专为支持通用（及参数化）交互组件的定义而设计，可在设计任意部分进行引用。

#### ▶[下一节](6.md)
