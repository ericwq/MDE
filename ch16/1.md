## 16.1 概述
本章包含第二个综合案例研究，一个来自嵌入式系统的例子。本章也是关于组件基础架构的模型驱动开发。它展示了以下主题：

- 通过文本 DSL 建模
- 针对不同的子域使用不同的模型
- 生成基础设施而非应用
- 产品线和特征模型
- 使用和调整 openArchitectureWare 生成器
- 元模型约束的 “伪声明 ”编程
- 生成器中的拦截器可分离元模型中的各个方面
- 生成构建文件
- 级联领域架构

本案例研究基于我们在各种实际项目中积累的经验。

请注意，本章的解释前提是您原则上已了解 openArchitectureWare 生成器 [OAW](../ref.md#oaw) 的工作原理<sup>[1](#1)</sup> 。本书第一部分的案例研究传达了重要的基础知识。因此，您应该先阅读这部分内容。此外，由于 openArchitectureWare 的变化速度比本书更快，这里展示的示例可能没有使用最新的API。

### 16.1.1 导言和动机
近年来，嵌入式系统的复杂性迅速增加：
- 您可以用手机拍照、上网以及显示视频流：有时您会惊讶地发现，您还可以用手机打电话。
- 汽车包含多达七十个小型计算机（ECU -- 电子控制单元），控制着汽车的各种技术环节。这些计算机与不同的总线系统相连，并包含大量软件。
- 越来越多的电器包含越来越多的软件。

长期以来，嵌入式系统领域的普遍做法是手动调整软件以适应硬件平台，这显然会影响产品的上市时间和整体效率。这种做法越来越难，因为几乎每个月都会有新的手机进入市场。同样，现代汽车的生命周期也越来越短。

由于电子产品和软件充斥着我们的日常生活，因此软件的质量和可靠性即使不能提高，也必须保持。最近，媒体报道了汽车和手机制造商因软件和电子产品而出现的大量产品质量问题。

<ins>因此，离散嵌入式系统的手工生产必须被产品线和软件系统族的开发所取代。在这种情况下，软件架构作为软件开发的核心构件，其意义日益重要。模型驱动软件开发作为一种实施范式 (paradigm) ，在这方面发挥着举足轻重的作用。</ins>

代码生成本身已经广泛应用于嵌入式系统开发领域。不过，它主要用于从通常是状态图（用于离散系统）或信号流程图（用于连续系统）的模型中生成应用逻辑。然而，执行这些功能的技术基础设施的开发越来越多地使用 MDSD。各行各业都在尝试建立此类中间件的标准，例如汽车制造领域的 [ASAR](../ref.md#asar) 。一种特别有前途的方法是将组件基础设施 [Voe02](../ref.md#voe02) 和 MDSD 结合起来。

### 16.1.2 组件基础设施
<ins>[VSW02](../ref.md#vsw02) 中描述的组件基础架构基于两个核心方面：</ins>
- <ins>组件封装了自成一体的应用功能。它们通过定义良好的接口提供这种功能。此外，组件还描述了执行其功能所需的资源，如其他组件接口。</ins>
- <ins>容器为其中运行的组件实例提供基本的技术服务。这些服务的具体内容取决于不同的领域。以下将进一步详细说明嵌入式系统的情况。</ins>

因此，应用由运行在容器中的多个组件实例组成。这样做的好处显而易见：首先，开发人员可以专注于应用逻辑的实现，而容器则提供基本的技术功能。根据其标准化程度，容器可以重复使用或从第三方购买<sup>[2](#2)</sup>。

<ins>我们将看到，对容器的具体要求在很大程度上取决于领域和环境。在嵌入式系统领域，容器服务的典型例子包括使用各种总线系统进行远程通信、依赖管理、启动协调和生命周期管理、任务分配和调度。这些都是与（实时）操作系统一起实现的。</ins>

### 16.1.3 嵌入式系统的组件基础设施要求
嵌入式系统面临着一个特殊的挑战：内存或电力、处理能力等资源的稀缺性，以及最重要的 -- 整套系统的单价。这些组件基础设施绝对不能引起与稀缺资源有关的额外要求或降低运行性能。在这里，我们面临着一些有趣的挑战，这些挑战可以在 MDSD 的帮助下得到很好的解决。

请注意，还有一些嵌入式系统规模更大、分布更广、复杂程度更高，例如航空电子设备中的 DRE 系统。在这类系统中，生成量身定制的基础设施并不那么重要。不过，系统设计的其他方面，即分布 (distribution) 、配置 (configuration) 和分布式服务质量 (distributed QoS)，可以使用模型驱动技术来解决。不过，本章不讨论这类系统。

### 16.1.4 基本方法
<ins>基本方法是生成组件容器。这样就可以针对目标系统对容器进行专门调整和优化。通过描述不同技术子域的多个模型，生成器创建与平台精确匹配的容器，同时满足组件和硬件的要求。</ins>

---
#### 1
在此期间，生成器的具体 API 的开发取得了进展。详情和教程请参阅 http://www.openarchitectureware.org。

#### 2
例如 J2EE、COM+ 或 CCM。
