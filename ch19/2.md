## 19.2 团队结构
试图强加一种通用的团队结构不会有任何好处。毕竟，不同的团队会形成自己的工作风格，并根据团队成员的知识和性格特点加以调整。如果试图把僵化的（新）角色强加于人，就会损害士气。应根据现有知识和个人喜好分配任务。我们更看重团队适当的宏观结构，例如将领域架构开发和应用开发分开。

![Figure 19.2](../img/f19.2.png)

图 19.2 总结了应用程序开发和领域架构开发中的重要角色。

正如您所看到的，有些角色在两个开发主线中都能找到。如果领域架构开发和应用程序开发在不同的物理地点进行，那么这些角色的代表必须同时出现在两个地点。从事领域架构开发的专家必须通过研讨会和培训向应用程序开发人员传达他们的知识。

此外，团队结构应与领域架构的组件结构保持一致，以支持领域架构开发的可扩展性。例如，如果领域架构中有三个重要部分，那么团队中可能就应该有三组知识/经验。在概述领域架构的设计模式时，适当的职责分配可以实现自上而下的方法。首先要定义接口，这样才能更好地并行开展不同子系统和框架的工作。

### 19.2.1 角色定义和人员配备要求

实际角色的扮演取决于项目规模、团队能力分布以及 MDSD 领域的重点。例如，在以架构为中心的 MDSD 项目中，领域分析师和领域架构师的角色可以由同一人担任，因为在这种情况下，MDSD 领域所需的知识就是领域架构师的知识。在一个非常小的、以架构为中心的 MDSD 项目中，图 19.1 所示的所有角色都可以由一个人担任，甚至可能包括实际的应用程序开发（因此是一个单人项目）。在一个更全面的产品系列中，领域分析师和领域架构师的角色尤其应该由不同的人来承担。

与应用程序开发相比，领域架构开发的角色分配规模极为重要：例如，一个 MDSD 项目有一百多名应用程序开发人员，但只有一名转型开发人员，除非领域架构已经成熟，否则该项目必将失败。请记住，领域架构师必须指导应用程序开发人员，尤其是在项目开始阶段，而对领域架构的反馈就是结果。

当然，我们无法提供一个简单的经验法则，特别是因为领域架构的引导阶段通常比其迭代演进阶段需要更多的人员。应用开发人员的数量应按比例增加，只有在引导阶段结束后才会逐渐减少。图 19.3 展示了我们随着时间推移进行角色导向扩展的理想化经验。

![Figure 19.3](../img/f19.3.png)

### 19.2.2 横向团队
团队间有效沟通的规则与传统的大规模软件开发相同：只要多个开发团队同时工作，就应通过建立 “横向” 小组来补充开发过程中确定的角色，从而支持遵守标准和持续改进。作为指导原则，我们建议建立以下横向小组。(在这种情况下，只有架构小组是强制性的。其他小组只有在团队人数达到或超过 15 人时才有意义）。

- 架构小组负责领域架构的规范和优先事项。该小组通常由来自应用或产品开发团队的软件架构师和至少一名领域架构开发协调员组成。
- 质量保证小组负责定义和遵守质量标准。
- 产品管理小组负责用例和其他需求定义的质量，以及产品开发的优先次序。该小组应包括每个产品系列的产品经理、领域专家和需求分析师。
- 项目管理小组负责遵守最后期限、控制预算限额、控制和定义必要的项目管理标准。

19.2.3 架构小组的任务
如果基于单一领域架构开发的应用程序不止一个，那么跨领域架构小组就显得尤为重要。我们必须再三强调，架构小组必须将自己的角色视为服务提供者和 “软件生产线的守护者”，这样才能取得成功。避免 “象牙塔” 架构至关重要。该小组的主要任务是根据项目或产品开发要求，控制领域架构的演变。因此，优先级不是由领域架构师确定的，而是由架构小组确定的。领域架构师还必须确保他们的架构能在实践中取得成功。让他们临时担任应用程序开发人员或项目架构师可能非常有用。

架构小组的次要任务是维护领域架构的质量属性，即监控性能、可扩展性、可重用性和可维护性。架构小组必须将这两个目标合并为一个切实可行的综合体。

我们不建议让架构小组承担领域架构的运行开发和演进工作：该小组通常没有时间做这项工作。为此，类似于框架开发的（部分）项目的组织结构更适合，它有自己的规划、迭代和发布周期。架构小组应该仅仅控制领域架构的演变，即利益的交叉代表，也就是同一领域中多个产品所共有的架构特征。

这种演变通常包括两个方面--变体定义和改进：

- 当交换平台组件时，例如将数据访问层从 X 技术交换到 Y 技术时，就会出现变体。 如果领域架构模块化良好，那么负责生成数据访问层的转换将在领域架构中创建一个松耦合模块（通常称为卡盒: cartridge）。现在，您可以用 Y 卡盒（您可能需要先构建 Y 卡盒）替换 X 卡盒，而无需更改业务逻辑接口或建模语言（DSL）。您得到的是领域架构的衍生品。为了进一步实现这一想法，您的主要目标将是构建可提供最大组合的模块，同时尽量减少冗余。然而，这一目标并不能通过理论来实现，而只能通过进化来实现。
- 项目的反馈循环带来了改进。例如，纠正 DSL 抽象层级过低的缺陷，或为被忽视的应用领域提供额外的生成支持，或为以前尚未认识到其自动化潜力的应用领域提供额外的生成支持。在大多数情况下，改进将带来现有软件包的新版本。透明的版本和发布管理流程应使项目能够自行决定是改用新版本还是保留旧版本（见第 15 章和第 13.3 节）。

原则上，进化的两个方面（变体定义和改进）都会对领域架构的具体重用产生负面影响：例如，必须先创建一个变体，或者改进不兼容后向。然而，如果因为这个原因而阻止进化，结果将适得其反，因为进化是创新和附加值的最终来源。不过，在这个层面上及时进行模块化，对于创建领域架构的构件非常重要。以模块为基础的软件系统生产线是一项应受到保护的投资。这些价值远远超出了单个项目的范围，应由架构小组来代表，该小组应从组织的最佳利益出发，控制领域架构的发展。

当然，我们的思考是从我们的角度出发的：它们肯定与您的第一个 MDSD 项目无关。根据贵组织的规模，它们适用于两到五年的规划间隔期。不过，这些思考并非假设或纯理论，而是基于实际经验。
