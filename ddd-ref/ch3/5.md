## 操作闭包: Closure of Operations

#### ▶[上一节](4.md)

最有趣的对象最终总会做些无法仅用基本操作来描述的事情。

因此：

<ins>**在适用情况下，定义一个操作，其返回类型应与参数类型一致。若实现者在计算过程中使用了状态，则该实现者实质上成为操作的参数，因此参数与返回值应与实现者具有相同类型。此类操作在其类型实例集上具有闭包性。闭包操作提供了一个高级接口，且不引入对其他概念的依赖。**</ins>

该模式最常应用于值对象的操作。由于 [Entity](../ch2/2.md) 的生命周期在领域中具有重要意义，你不能随意创建新实体来回答问题。某些操作在 [Entity](../ch2/2.md) 类型下具有封闭性。例如向`Employee`对象查询其主管时，返回的必然是另一个`Employee`对象。但总体而言，[Entities](../ch2/2.md) 通常不属于计算结果类型的概念。因此在多数情况下，这正是探索 [Value Objects](ch2/3.md) 应用场景的契机。

有时你会接近这种模式。参数与实现方匹配，但返回类型不同；或者返回类型与接收方匹配，但参数不同。这些操作虽未形成闭包，却能带来闭包的部分优势，解放思维。

#### ▶[下一节](6.md)
