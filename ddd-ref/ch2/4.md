## 领域事件: Domain Events *

#### ▶[上一节](3.md)

发生了一些领域专家关心的事情。

一个 [Entities](2.md) 负责跟踪其状态以及管理其生命周期的规则。但如果你需要了解状态变化的实际原因，这通常并不明确，而且可能很难解释系统为什么会变成现在的样子。审计跟踪可以允许追溯，但通常不适合作为程序本身逻辑的使用。[Entities](2.md) 的变更历史可以访问以前的状态，但忽略了这些变化的意义，因此对信息的任何操作都是程序化的，并且通常被推到领域层之外。

在分布式系统中，会出现一系列不同但相关的问题。分布式系统的状态无法始终保持完全一致。我们始终保持 [Aggregates]() 的内部一致性，同时以异步方式进行其他更改。当变化在网络节点之间传播时，多个更新可能会以乱序或来自不同来源的方式到达，这会使得解决这些更新变得困难。

因此：

<ins>**将领域中的活动信息建模为一系列离散事件。将每个事件表示为领域对象。这些事件不同于反映软件自身活动的系统事件，尽管系统事件通常与领域事件相关联，要么作为对领域事件的响应的一部分，要么作为将领域事件的信息传递到系统中的一种方式。**</ins>

<ins>**领域事件是领域模型的一个完整组成部分，是对领域中发生的事情的表现。在明确领域专家希望跟踪或收到通知的事件，或者与其他模型对象的状态变化相关的事件时，可以忽略不相关的领域活动。**</ins>

在分布式系统中，[Entities](2.md) 的状态可以从特定节点当前已知的领域事件中推断出来，从而在缺乏对整个系统的完整信息的情况下仍能保持一致的模型。

领域事件通常是不可变的，因为它们记录的是过去发生的事情。除了事件的描述之外，领域事件通常还包含事件发生时间的时间戳以及参与事件的 [Entities](2.md) 标识。此外，领域事件往往还有一个单独的时间戳，用于指示事件何时被录入系统，以及录入者的标识。在需要时，领域事件的标识可以基于这些属性的某些集合来确定。例如，如果同一个事件的两个实例到达一个节点，它们可以被识别为相同的事件。


#### ▶[下一节](5.md)
